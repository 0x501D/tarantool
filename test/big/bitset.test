# encoding: utf-8
#

import os
import shutil

for file in ("utils.lua", "bitset.lua"):
    src_path = os.path.join("big/", file)
    dst_path = os.path.join(vardir, file)
    shutil.copy(src_path, dst_path)
    admin("lua dofile('%s')" % (file), silent=False) 
    os.unlink(dst_path);

print """
#-----------------------------------------------------------------------------#
# BitsetIndex: insert/delete
#-----------------------------------------------------------------------------#
""";

admin("lua test_insert_delete(128)", silent=False)

print """
#-----------------------------------------------------------------------------#
# BitsetIndex: ALL
#-----------------------------------------------------------------------------#
""";

admin("lua clear()", silent=False)
admin("lua fill(1, 128)", silent=False)
admin("lua dump(box.index.BITS_ALL)", silent=False)

print """
#-----------------------------------------------------------------------------#
# BitsetIndex: BITS_ALL_SET (single bit)
#-----------------------------------------------------------------------------#
""";

admin("lua dump(box.index.BITS_ALL_SET, 0)", silent=False)

admin("lua dump(box.index.BITS_ALL_SET, 1)", silent=False)
admin("lua dump(box.index.BITS_ALL_SET, 2)", silent=False)
admin("lua dump(box.index.BITS_ALL_SET, 8)", silent=False)
admin("lua dump(box.index.BITS_ALL_SET, 1073741824)", silent=False)
admin("lua dump(box.index.BITS_ALL_SET, 2147483648)", silent=False)
admin("lua dump(box.index.BITS_ALL_SET, 4294967296)", silent=False)

print """
#-----------------------------------------------------------------------------#
# BitsetIndex: BITS_ALL_SET (multiple bit)
#-----------------------------------------------------------------------------#
""";

admin("lua dump(box.index.BITS_ALL_SET, 3)", silent=False)
admin("lua dump(box.index.BITS_ALL_SET, 7)", silent=False)
admin("lua dump(box.index.BITS_ALL_SET, 31)", silent=False)
admin("lua dump(box.index.BITS_ALL_SET, 5)", silent=False)
admin("lua dump(box.index.BITS_ALL_SET, 10)", silent=False)
admin("lua dump(box.index.BITS_ALL_SET, 27)", silent=False)
admin("lua dump(box.index.BITS_ALL_SET, 341)", silent=False)
admin("lua dump(box.index.BITS_ALL_SET, 2147483649)", silent=False)
admin("lua dump(box.index.BITS_ALL_SET, 4294967295)", silent=False)

print """
#-----------------------------------------------------------------------------#
# BitsetIndex: BITS_ALL_NOT_SET (single bit)
#-----------------------------------------------------------------------------#
""";

admin("lua dump(box.index.BITS_ALL_NOT_SET, 0)", silent=False)

admin("lua dump(box.index.BITS_ALL_NOT_SET, 2)", silent=False)
admin("lua dump(box.index.BITS_ALL_NOT_SET, 8)", silent=False)
admin("lua dump(box.index.BITS_ALL_NOT_SET, 4294967296)", silent=False)

print """
#-----------------------------------------------------------------------------#
# BitsetIndex: BITS_ALL_NOT_SET (multiple bit)
#-----------------------------------------------------------------------------#
""";

admin("lua dump(box.index.BITS_ALL_NOT_SET, 3)", silent=False)
admin("lua dump(box.index.BITS_ALL_NOT_SET, 7)", silent=False)
admin("lua dump(box.index.BITS_ALL_NOT_SET, 10)", silent=False)
admin("lua dump(box.index.BITS_ALL_NOT_SET, 27)", silent=False)
admin("lua dump(box.index.BITS_ALL_NOT_SET, 85)", silent=False)
admin("lua dump(box.index.BITS_ALL_NOT_SET, 4294967295)", silent=False)

print """
#-----------------------------------------------------------------------------#
# BitsetIndex: BITS_ANY_SET (single bit)
#-----------------------------------------------------------------------------#
""";

admin("lua dump(box.index.BITS_ANY_SET, 0)", silent=False)

admin("lua dump(box.index.BITS_ANY_SET, 16)", silent=False)
admin("lua dump(box.index.BITS_ANY_SET, 128)", silent=False)
admin("lua dump(box.index.BITS_ANY_SET, 4294967296)", silent=False)

print """
#-----------------------------------------------------------------------------#
# BitsetIndex: BITS_ANY_SET (multiple bit)
#-----------------------------------------------------------------------------#
""";

admin("lua dump(box.index.BITS_ANY_SET, 7)", silent=False)
admin("lua dump(box.index.BITS_ANY_SET, 84)", silent=False)
admin("lua dump(box.index.BITS_ANY_SET, 113)", silent=False)
