name: centos_7_arm

on:
  workflow_run:
    workflows: ["main_workflow"]
    types: [completed]

jobs:
  centos_7_arm:
    # We want to run on external PRs, but not on our own internal PRs
    # as they'll be run by the push to the branch.
#    if: (github.event.pull_request.head.repo.full_name != github.repository ) &&
#        ! endsWith(github.ref, '-notest')

    runs-on: odroid-arm64

#    strategy:
#      fail-fast: false

    steps:
      # Permissions correction is needed for self-host runners,
      # where work path is saved between different workflows runs.
      - name: correct permissions in working directory
        shell: bash
        run: |
          sudo chown -R $(id -u):$(id -g) .
