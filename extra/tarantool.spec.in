# -*- rpm-spec -*-
BuildRoot:      @CPACK_RPM_DIRECTORY@/@CPACK_PACKAGE_FILE_NAME@@CPACK_RPM_PACKAGE_COMPONENT_PART_PATH@
Summary:        @CPACK_RPM_PACKAGE_SUMMARY@
Name:           @CPACK_RPM_PACKAGE_NAME@@CPACK_RPM_PACKAGE_COMPONENT_PART_NAME@
Version:        @CPACK_RPM_PACKAGE_VERSION@
Release:        @CPACK_RPM_PACKAGE_RELEASE@
License:        @CPACK_RPM_PACKAGE_LICENSE@
Group:          @CPACK_RPM_PACKAGE_GROUP@
Vendor:         @CPACK_RPM_PACKAGE_VENDOR@
@TMP_RPM_URL@
@TMP_RPM_REQUIRES@
@TMP_RPM_PROVIDES@
@TMP_RPM_OBSOLETES@
@TMP_RPM_CONFLICTS@
@TMP_RPM_AUTOPROV@
@TMP_RPM_AUTOREQ@
@TMP_RPM_AUTOREQPROV@
@TMP_RPM_BUILDARCH@
@TMP_RPM_PREFIX@

%define _rpmdir @CPACK_RPM_DIRECTORY@
%define _rpmfilename @CPACK_RPM_FILE_NAME@
%define _unpackaged_files_terminate_build 0
%define _topdir @CPACK_RPM_DIRECTORY@
@TMP_RPM_SPEC_INSTALL_POST@
@CPACK_RPM_SPEC_MORE_DEFINE@
@CPACK_RPM_COMPRESSION_TYPE_TMP@

%description
@CPACK_RPM_PACKAGE_DESCRIPTION@

# This is a shortcutted spec file generated by CMake RPM generator
# we skip _install step because CPack does that for us.
# We do only save CPack installed tree in _prepr
# and then restore it in build.
%prep
mv $RPM_BUILD_ROOT "@CPACK_TOPLEVEL_DIRECTORY@/tmpBBroot"

#p build

%install
if [ -e $RPM_BUILD_ROOT ];
then
  rm -rf $RPM_BUILD_ROOT
fi
mv "@CPACK_TOPLEVEL_DIRECTORY@/tmpBBroot" $RPM_BUILD_ROOT

%clean

%post
@CPACK_RPM_SPEC_POSTINSTALL@

%postun
@CPACK_RPM_SPEC_POSTUNINSTALL@

%pre
@CPACK_RPM_SPEC_PREINSTALL@

%preun
@CPACK_RPM_SPEC_PREUNINSTALL@

%files
%defattr(-,root,root,-)
%dir "/usr/local/share/tarantool"
"/usr/local/share/tarantool/00000000000000000001.snap"
%dir "/usr/local/share/doc/tarantool"
"/usr/local/share/doc/tarantool/README.md"
"/usr/local/share/doc/tarantool/LICENSE"
"/usr/local/share/doc/tarantool/box-protocol.txt"
"/usr/local/man/tarantool.1"
"/usr/local/man/tarantool_box.1"
"/usr/local/bin/tarantool_box"
"/usr/local/bin/tarantool_checksum"
"/usr/local/bin/tarantool"
"/usr/local/bin/tarantool_multi.sh"
"/usr/local/bin/tarantool_deploy.sh"
"/etc/rc.d/init.d/tarantool_box"
%dir "/usr/local/include/tarantool"
"/usr/local/include/tarantool/tnt.h"
"/usr/local/include/tarantool/tnt_buf.h"
"/usr/local/include/tarantool/tnt_call.h"
"/usr/local/include/tarantool/tnt_delete.h"
"/usr/local/include/tarantool/tnt_dir.h"
"/usr/local/include/tarantool/tnt_enc.h"
"/usr/local/include/tarantool/tnt_insert.h"
"/usr/local/include/tarantool/tnt_io.h"
"/usr/local/include/tarantool/tnt_iob.h"
"/usr/local/include/tarantool/tnt_iter.h"
"/usr/local/include/tarantool/tnt_lex.h"
"/usr/local/include/tarantool/tnt_log.h"
"/usr/local/include/tarantool/tnt_mem.h"
"/usr/local/include/tarantool/tnt_net.h"
"/usr/local/include/tarantool/tnt_opt.h"
"/usr/local/include/tarantool/tnt_ping.h"
"/usr/local/include/tarantool/tnt_proto.h"
"/usr/local/include/tarantool/tnt_queue.h"
"/usr/local/include/tarantool/tnt_reply.h"
"/usr/local/include/tarantool/tnt_request.h"
"/usr/local/include/tarantool/tnt_rpl.h"
"/usr/local/include/tarantool/tnt_select.h"
"/usr/local/include/tarantool/tnt_snapshot.h"
"/usr/local/include/tarantool/tnt_sql.h"
"/usr/local/include/tarantool/tnt_stream.h"
"/usr/local/include/tarantool/tnt_tuple.h"
"/usr/local/include/tarantool/tnt_update.h"
"/usr/local/include/tarantool/tnt_utf8.h"
"/usr/local/include/tarantool/tnt_xlog.h"
"/usr/local/lib/libtarantool.a"
"/usr/local/lib/libtarantool.so"
"/usr/local/lib/libtarantool.so.1"
"/usr/local/lib/libtarantool.so.1.1"
"/usr/local/lib/libtarantoolnet.a"
"/usr/local/lib/libtarantoolnet.so"
"/usr/local/lib/libtarantoolnet.so.1"
"/usr/local/lib/libtarantoolnet.so.1.1"
"/usr/local/lib/libtarantoolrpl.a"
"/usr/local/lib/libtarantoolrpl.so"
"/usr/local/lib/libtarantoolrpl.so.1"
"/usr/local/lib/libtarantoolrpl.so.1.1"
"/usr/local/lib/libtarantoolsql.a"
"/usr/local/lib/libtarantoolsql.so"
"/usr/local/lib/libtarantoolsql.so.1"
"/usr/local/lib/libtarantoolsql.so.1.1"

%config(noreplace) "/usr/local/etc/tarantool.cfg"

%changelog
@CPACK_RPM_SPEC_CHANGELOG@
